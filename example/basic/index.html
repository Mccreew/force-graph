<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style> body {
    margin: 0;
  } </style>

  <!--<script src="//unpkg.com/force-graph"></script>-->
  <script src="../../dist/force-graph.js"></script>
</head>

<body>
<div id="graph"></div>

<script>
  let count = 2
	const Graph = ForceGraph()
	(document.getElementById('graph'))
	// .linkDirectionalParticles(2)
		.feedData((graphData) => {
      axios.get('http://localhost:8080/data/' + count).then(req => {
      	req.data.nodes.forEach(n => {
      		n.flag = 'new'
        })
        graphData.nodes.push(...req.data.nodes)
        graphData.links.push(...req.data.links)

        count += 1
        Graph.graphData(graphData)
      })
		})
		.refreshData((data) => {
			console.log('refreshData: ', data)
			try {
				Graph.graphData(data)
			} catch (e) {
				console.log(e)
			}
		})
		.onNodeClick(n => {
			console.log(n)
		})
		.onEngineStop(() => {
			console.log('animation end')
		})
    .onLinkClick(l => {
    	console.log(l)
    });

	axios.get('http://localhost:8080/data/1').then(req => {
		let data = req.data

    // console.log('req.data: ', data)
		Graph.graphData(data)
	})


</script>
</body>
